<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=content-language content="en"><meta name=author content="Daniel Guo"><meta name=description content="spring-boot-devtools提供了一些辅助开发的功能，比如：
 自动禁用依赖库或模板的缓存，启动 web 模块的 debug 日志 自动重启：保存文件（Eclipse）或者 Build（Intellij Idea）时自动重启应用 LiveReload 自动触发浏览器的刷新（资源发生变化时） 全局配置：提供全局配置文件，对所有包含 devtools 的应用生效  在实际开发中，自动重启功能比较有用，所以这里主要介绍自动重启的配置与使用。
添加依赖 maven 配置：
<dependency> <groupId>org.springframework.boot</groupId> <artifactId>spring-boot-devtools</artifactId> <optional>true</optional> </dependency> gradle 配置：
configurations { developmentOnly runtimeClasspath { extendsFrom developmentOnly } } dependencies { developmentOnly(&#34;org.springframework.boot:spring-boot-devtools&#34;) }  在依赖配置中，如 maven 中添加optional标记，在 gradle 中使用自定义的 developmentOnly，表示该依赖不会被传递。 在生产环境下，devtool会自动禁用，通过java -jar启动应用被认为是生产环境。  自动重启 如果 classpath 上的文件发生了变化，应用会自动重启。
自动重启的触发：
 在 Eclipse 中，被修改的文件保存时会触发重启 在 Intellij Idea 中，使用Build -> Build Project (CMD+F9)手动触发   在 Intellij Idea 中也可以配置在文件保存时触发重启，但需要使以下两项配置生效： 1."><meta name=keywords content="blog,developer,Java,Docker,Redis,Scala,SpringBoot"><script data-ad-client=ca-pub-6193773296453862 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><meta name=twitter:card content="summary"><meta name=twitter:title content="SpringBoot系列一：Spring Boot Devtools"><meta name=twitter:description content="spring-boot-devtools提供了一些辅助开发的功能，比如：
 自动禁用依赖库或模板的缓存，启动 web 模块的 debug 日志 自动重启：保存文件（Eclipse）或者 Build（Intellij Idea）时自动重启应用 LiveReload 自动触发浏览器的刷新（资源发生变化时） 全局配置：提供全局配置文件，对所有包含 devtools 的应用生效  在实际开发中，自动重启功能比较有用，所以这里主要介绍自动重启的配置与使用。
添加依赖 maven 配置：
<dependency> <groupId>org.springframework.boot</groupId> <artifactId>spring-boot-devtools</artifactId> <optional>true</optional> </dependency> gradle 配置：
configurations { developmentOnly runtimeClasspath { extendsFrom developmentOnly } } dependencies { developmentOnly(&#34;org.springframework.boot:spring-boot-devtools&#34;) }  在依赖配置中，如 maven 中添加optional标记，在 gradle 中使用自定义的 developmentOnly，表示该依赖不会被传递。 在生产环境下，devtool会自动禁用，通过java -jar启动应用被认为是生产环境。  自动重启 如果 classpath 上的文件发生了变化，应用会自动重启。
自动重启的触发：
 在 Eclipse 中，被修改的文件保存时会触发重启 在 Intellij Idea 中，使用Build -> Build Project (CMD+F9)手动触发   在 Intellij Idea 中也可以配置在文件保存时触发重启，但需要使以下两项配置生效： 1."><meta property="og:title" content="SpringBoot系列一：Spring Boot Devtools"><meta property="og:description" content="spring-boot-devtools提供了一些辅助开发的功能，比如：
 自动禁用依赖库或模板的缓存，启动 web 模块的 debug 日志 自动重启：保存文件（Eclipse）或者 Build（Intellij Idea）时自动重启应用 LiveReload 自动触发浏览器的刷新（资源发生变化时） 全局配置：提供全局配置文件，对所有包含 devtools 的应用生效  在实际开发中，自动重启功能比较有用，所以这里主要介绍自动重启的配置与使用。
添加依赖 maven 配置：
<dependency> <groupId>org.springframework.boot</groupId> <artifactId>spring-boot-devtools</artifactId> <optional>true</optional> </dependency> gradle 配置：
configurations { developmentOnly runtimeClasspath { extendsFrom developmentOnly } } dependencies { developmentOnly(&#34;org.springframework.boot:spring-boot-devtools&#34;) }  在依赖配置中，如 maven 中添加optional标记，在 gradle 中使用自定义的 developmentOnly，表示该依赖不会被传递。 在生产环境下，devtool会自动禁用，通过java -jar启动应用被认为是生产环境。  自动重启 如果 classpath 上的文件发生了变化，应用会自动重启。
自动重启的触发：
 在 Eclipse 中，被修改的文件保存时会触发重启 在 Intellij Idea 中，使用Build -> Build Project (CMD+F9)手动触发   在 Intellij Idea 中也可以配置在文件保存时触发重启，但需要使以下两项配置生效： 1."><meta property="og:type" content="article"><meta property="og:url" content="https://nkcoder.github.io/posts/springboot/springboot-1-use-devtools/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-02-20T08:17:39+08:00"><meta property="article:modified_time" content="2020-02-20T08:17:39+08:00"><base href=https://nkcoder.github.io/posts/springboot/springboot-1-use-devtools/><title>SpringBoot系列一：Spring Boot Devtools · Just Coding</title><link rel=canonical href=https://nkcoder.github.io/posts/springboot/springboot-1-use-devtools/><link href="https://fonts.googleapis.com/css?family=Lato:400,700%7CMerriweather:300,700%7CSource+Code+Pro:400,700&display=swap" rel=stylesheet><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.13.0/css/all.css integrity=sha384-Bfad6CLCknfcloXFOyFnlgtENryhrpZCe29RTifKEixXQZ38WheV+i/6YWSzkz3V crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin=anonymous><link rel=stylesheet href=https://nkcoder.github.io/css/coder.min.070454269d1fdb565d8c87a7042bdea5231ac2b69990e4b993397cf19cd75eb1.css integrity="sha256-BwRUJp0f21ZdjIenBCvepSMawraZkOS5kzl88ZzXXrE=" crossorigin=anonymous media=screen><link rel=stylesheet href=https://nkcoder.github.io/css/custom.css><link rel=icon type=image/png href=https://nkcoder.github.io/img/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=https://nkcoder.github.io/img/favicon-16x16.png sizes=16x16><meta name=generator content="Hugo 0.85.0"></head><body class=colorscheme-light><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=https://nkcoder.github.io/>Just Coding</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fas fa-bars"></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=https://nkcoder.github.io/posts/>Blog</a></li><li class=navigation-item><a class=navigation-link href=https://nkcoder.github.io/categories/>Category</a></li><li class=navigation-item><a class=navigation-link href=https://nkcoder.github.io/tags/>Tag</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title>SpringBoot系列一：Spring Boot Devtools</h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fas fa-calendar"></i>
<time datetime=2020-02-20T08:17:39+08:00>February 20, 2020</time></span>
<span class=reading-time><i class="fas fa-clock"></i>
1-minute read</span></div><div class=categories><i class="fas fa-folder"></i>
<a href=https://nkcoder.github.io/categories/springboot/>SpringBoot</a></div></div></header><div><p><code>spring-boot-devtools</code>提供了一些辅助开发的功能，比如：</p><ul><li>自动禁用依赖库或模板的缓存，启动 web 模块的 debug 日志</li><li>自动重启：保存文件（Eclipse）或者 Build（Intellij Idea）时自动重启应用</li><li>LiveReload 自动触发浏览器的刷新（资源发生变化时）</li><li>全局配置：提供全局配置文件，对所有包含 devtools 的应用生效</li></ul><p>在实际开发中，自动重启功能比较有用，所以这里主要介绍自动重启的配置与使用。</p><h2 id=添加依赖>添加依赖</h2><p>maven 配置：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback>&lt;dependency&gt;
  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
  &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;
  &lt;optional&gt;true&lt;/optional&gt;
&lt;/dependency&gt;
</code></pre></div><p>gradle 配置：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-gradle data-lang=gradle>configurations <span style=color:#ff79c6>{</span>
  developmentOnly
  runtimeClasspath <span style=color:#ff79c6>{</span>
    extendsFrom developmentOnly
  <span style=color:#ff79c6>}</span>
<span style=color:#ff79c6>}</span>
dependencies <span style=color:#ff79c6>{</span>
  developmentOnly<span style=color:#ff79c6>(</span><span style=color:#f1fa8c>&#34;org.springframework.boot:spring-boot-devtools&#34;</span><span style=color:#ff79c6>)</span>
<span style=color:#ff79c6>}</span>
</code></pre></div><ul><li>在依赖配置中，如 maven 中添加<code>optional</code>标记，在 gradle 中使用自定义的 developmentOnly，表示该依赖不会被传递。</li><li>在生产环境下，<code>devtool</code>会自动禁用，通过<code>java -jar</code>启动应用被认为是生产环境。</li></ul><h2 id=自动重启>自动重启</h2><p>如果 <code>classpath</code> 上的文件发生了变化，应用会自动重启。</p><p>自动重启的触发：</p><ul><li>在 Eclipse 中，被修改的文件保存时会触发重启</li><li>在 Intellij Idea 中，使用<code>Build -> Build Project (CMD+F9)</code>手动触发</li></ul><blockquote><p>在 Intellij Idea 中也可以配置在文件保存时触发重启，但需要使以下两项配置生效：
<code>1. Preference -> compiler -> 选中 Build project automatically</code>
<code>2. Help -> Find action(Shift + CMD + A) -> 选中 compiler.automake.allow.when.app.running</code></p></blockquote><p>自动重启原理：Spring Boot 会使用两个 <code>classloader</code>，不会发生变化的类（主要是第三方依赖库）会被加载到 <code>base classloader</code> 中，开发过程中使用的类会被加载到 <code>restart classloader</code>，应用重启时，只有 <code>restart classloader</code> 会重启，而 <code>base classloader</code> 不变，所以重启速度会更快一些。另一方面，如果依赖发生了变化，则需要手动重启。</p><h3 id=扩展自动重启监视的目录>扩展自动重启监视的目录</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback>spring.devtools.restart.exclude=static/**,public/**
spring.devtools.restart.additional-paths=mypackage/**
</code></pre></div><h3 id=禁用自动重启>禁用自动重启：</h3><p>可以有两种方式：</p><p>在 application.properties 中配置：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback>spring.devtools.restart.enabled=false
</code></pre></div><p>或者在调用<code>SpringApplication.run()</code>之前调用：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback>System.setProperty(&#34;spring.devtools.restart.enabled&#34;, &#34;false&#34;);
</code></pre></div><blockquote><p>完整的示例代码见: <a href=https://github.com/nkcoder/springboot-samples/tree/master/springboot-devtools>github-springboot-devtools</a>.</p></blockquote><h2 id=参考>参考</h2><ul><li><a href=https://www.manning.com/books/spring-in-action-fifth-edition>Spring in Action, Fifth Edition</a></li><li><a href=https://dev.to/suin/spring-boot-developer-tools-how-to-enable-automatic-restart-in-intellij-idea-1c6i>Spring Boot Developer Tools: How to enable automatic restart in IntelliJ IDEA</a></li><li><a href=https://docs.spring.io/spring-boot/docs/current/reference/html/using-boot-devtools.html>Developer Tools</a></li></ul></div><footer><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return}var b=document,a=b.createElement('script');a.async=!0,a.src='//nkcoder.disqus.com/embed.js',a.setAttribute('data-timestamp',+new Date),(b.head||b.body).appendChild(a)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></footer></article><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script type=text/javascript async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js id=MathJax-script></script><script>MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']],processEscapes:!0,processEnvironments:!0},options:{skipHtmlTags:['script','noscript','style','textarea','pre']}}</script></section></div><footer class=footer><section class=container><p>Enjoy coding, friends!</p>©
2021
Daniel Guo
·
Powered by <a href=https://gohugo.io/>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/>Coder</a>.</section></footer></main><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-168735975-1','auto'),ga('send','pageview'))</script></body></html>